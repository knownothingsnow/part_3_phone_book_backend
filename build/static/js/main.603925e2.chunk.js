(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{24:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),o=t(16),a=t.n(o),s=t(18),u=t(17),i=t(3),d=function(e){var n=e.persons,t=e.setPersonsToShow,r=e.searcher,o=e.setSearcher;return Object(c.jsxs)("div",{children:["filter shown with: ",Object(c.jsx)("input",{value:r,onChange:function(e){var c=e.target.value;o(c);var r=!Boolean(c)?n:n.filter((function(e){return new RegExp("".concat(c),"ig").test(e.name)}));t(r)}})]})},b=function(e){var n=e.message;return""===n.type?null:"success"===n.type?Object(c.jsx)("div",{className:"message success",children:n.content}):"error"===n.type?Object(c.jsx)("div",{className:"message error",children:n.content}):void 0},j=function(e){var n=e.submitName,t=e.newName,r=e.nameHandler,o=e.newNumber,a=e.numberHandler,s=e.message;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b,{message:s}),Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:o,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})]})},f=function(e){var n=e.personsToShow,t=e.deletePerson;return Object(c.jsx)(c.Fragment,{children:n.map((function(e){return Object(c.jsxs)("div",{children:[e.name,"\xa0\xa0",e.number,"\xa0\xa0",Object(c.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},h=(t(24),t(6)),l=t.n(h),m="https://ky-phone-book.herokuapp.com/api/persons",v=function(){return l.a.get(m).then((function(e){return e.data}))},p=function(e){return l.a.post(m,e).then((function(e){return e.data}))},O=function(e,n){return l.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return l.a.delete("".concat(m,"/").concat(e))},g=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),b=Object(i.a)(a,2),h=b[0],l=b[1],m=Object(r.useState)(t),g=Object(i.a)(m,2),w=g[0],y=g[1],S=Object(r.useState)(""),k=Object(i.a)(S,2),N=k[0],P=k[1],T=Object(r.useState)(""),C=Object(i.a)(T,2),H=C[0],E=C[1],I={type:"",content:""},B=Object(r.useState)(I),D=Object(i.a)(B,2),F=D[0],J=D[1];Object(r.useEffect)((function(){v().then((function(e){o(e),y(e)}))}),[]);var A=function(){P(""),E(""),l("")},R=function(e){return setTimeout((function(){J(I)}),1e3*e)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(d,{persons:t,setPersonsToShow:y,searcher:h,setSearcher:l}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(j,{submitName:function(e){e.preventDefault();var n,c={name:N,number:H},r=Object(u.a)(t.values());try{var a=function(){var e=n.value;if(e.name===N)return window.confirm("".concat(N," is already added to phonebook, replace the old number with a new one?"))&&O(e.id,c).then((function(n){J({type:"success",content:"Updated ".concat(c.name)}),R(3),o(t.map((function(t){return t.id!==e.id?t:n}))),y(w.map((function(t){return t.id!==e.id?t:n}))),A()})).catch((function(e){console.log(e),J({type:"error",content:"Information of ".concat(c.name," has already been removed from server")})})),{v:void 0}};for(r.s();!(n=r.n()).done;){var i=a();if("object"===typeof i)return i.v}}catch(d){r.e(d)}finally{r.f()}p(c).then((function(e){var n=[].concat(Object(s.a)(t),[e]);J({type:"success",content:"Added ".concat(c.name)}),R(3),o(n),y(n),A()}))},newName:N,nameHandler:function(e){P(e.target.value)},newNumber:H,numberHandler:function(e){E(e.target.value)},message:F}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(f,{personsToShow:w,deletePerson:function(e){var n=t.filter((function(n){return n.id===e}))[0].name;window.confirm("Delete ".concat(n))&&x(e).then((function(n){var c=t.filter((function(n){return n.id!==e}));o(c),y(c)})).catch((function(e){console.log(e),J({type:"error",content:"Information of ".concat(n," has already been removed from server")}),R(3)}))}})]})};a.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.603925e2.chunk.js.map