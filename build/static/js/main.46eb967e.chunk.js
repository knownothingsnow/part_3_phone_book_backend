(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{24:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),o=t(16),a=t.n(o),s=t(18),u=t(17),i=t(3),d=function(e){var n=e.persons,t=e.setPersonsToShow,c=e.searcher,o=e.setSearcher;return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{value:c,onChange:function(e){var r=e.target.value;o(r);var c=!Boolean(r)?n:n.filter((function(e){return new RegExp("".concat(r),"ig").test(e.name)}));t(c)}})]})},j=function(e){var n=e.message;return""===n.type?null:"success"===n.type?Object(r.jsx)("div",{className:"message success",children:n.content}):"error"===n.type?Object(r.jsx)("div",{className:"message error",children:n.content}):void 0},b=function(e){var n=e.submitName,t=e.newName,c=e.nameHandler,o=e.newNumber,a=e.numberHandler,s=e.message;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j,{message:s}),Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:c})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:o,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})]})},f=function(e){var n=e.personsToShow,t=e.deletePerson;return Object(r.jsx)(r.Fragment,{children:n.map((function(e){return Object(r.jsxs)("div",{children:[e.name,"\xa0\xa0",e.number,"\xa0\xa0",Object(r.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},h=(t(24),t(6)),l=t.n(h),m="/api/persons",p=function(){return l.a.get(m).then((function(e){return e.data}))},O=function(e){return l.a.post(m,e).then((function(e){return e.data}))},v=function(e,n){return l.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return l.a.delete("".concat(m,"/").concat(e))},w=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),j=Object(i.a)(a,2),h=j[0],l=j[1],m=Object(c.useState)(t),w=Object(i.a)(m,2),g=w[0],y=w[1],S=Object(c.useState)(""),N=Object(i.a)(S,2),k=N[0],P=N[1],T=Object(c.useState)(""),C=Object(i.a)(T,2),H=C[0],E=C[1],B={type:"",content:""},D=Object(c.useState)(B),F=Object(i.a)(D,2),J=F[0],A=F[1];Object(c.useEffect)((function(){p().then((function(e){o(e),y(e)})).catch((function(e){A({type:"error",content:e.response.data.error})}))}),[]);var I=function(){P(""),E(""),l("")},R=function(e){return setTimeout((function(){A(B)}),1e3*e)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(d,{persons:t,setPersonsToShow:y,searcher:h,setSearcher:l}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(b,{submitName:function(e){e.preventDefault();var n,r={name:k,number:H},c=Object(u.a)(t.values());try{var a=function(){var e=n.value;if(e.name===k)return window.confirm("".concat(k," is already added to phonebook, replace the old number with a new one?"))&&v(e.id,r).then((function(n){A({type:"success",content:"Updated ".concat(r.name)}),R(3),o(t.map((function(t){return t.id!==e.id?t:n}))),y(g.map((function(t){return t.id!==e.id?t:n}))),I()})).catch((function(e){A({type:"error",content:e.response.data.error})})),{v:void 0}};for(c.s();!(n=c.n()).done;){var i=a();if("object"===typeof i)return i.v}}catch(d){c.e(d)}finally{c.f()}O(r).then((function(e){var n=[].concat(Object(s.a)(t),[e]);A({type:"success",content:"Added ".concat(r.name)}),R(3),o(n),y(n),I()})).catch((function(e){A({type:"error",content:e.response.data.error})}))},newName:k,nameHandler:function(e){P(e.target.value)},newNumber:H,numberHandler:function(e){E(e.target.value)},message:J}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(f,{personsToShow:g,deletePerson:function(e){var n=t.filter((function(n){return n.id===e}))[0].name;window.confirm("Delete ".concat(n))&&x(e).then((function(n){var r=t.filter((function(n){return n.id!==e}));o(r),y(r)})).catch((function(e){A({type:"error",content:e.response.data.error}),R(3)}))}})]})};a.a.render(Object(r.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.46eb967e.chunk.js.map